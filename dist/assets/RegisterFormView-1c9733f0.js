import{_,a as A}from"./AppInput-f20b278b.js";import{_ as E,c as B,u as I,o as v,a as C,b as m,w as g,d as M,e as r,m as S,n as q,f as t,r as x,I as z,g as T,T as U,h as L,i as O,j as w,k as N,l as R,t as p,p as P,q as F,s as D}from"./index-2457fc58.js";const H=(s="This field must be a valid email.")=>e=>e&&!/^[^@]+@[^@]+\.[^@]+$/.test(e)&&s,Z=(s,e="Max length exceeded")=>a=>a&&a.length>s&&e,G=(s,e="Min length not met")=>a=>a&&a.length<s&&e,J=(s="Password must be at least 8 characters long, include a number and a special character.")=>e=>!/[A-Za-z]/.test(e)&&!/[0-9]/.test(e)&&!/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(e)&&s,$=(s="This field is required.")=>e=>!e&&s,K=(s,e="Passwords do not match.")=>(a,u)=>{const n=u==null?void 0:u[s];return a!==n?e:null};const Q={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-primary-900 bg-opacity-50 w-full h-full"},W={__name:"AppModal",props:{closeOnEsc:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0},isOpen:{type:Boolean,default:!1}},emits:["close"],setup(s){const e=s,a=B(()=>e.isOpen),u=I();return(n,i)=>(v(),C(L,{to:"#modal-container"},[m(U,{name:"modal"},{default:g(()=>[a.value?(v(),M("div",Q,[r("div",S({ref:"modal",class:"relative bg-wsmoke rounded shadow-lg p-6 min-w-[-webkit-fill-available] min-h-[-webkit-fill-available] md:min-h-[20rem] md:min-w-[20rem] flex flex-col justify-between"},n.$attrs),[r("div",{class:q(["flex items-center mb-4",{"justify-between":t(u).title,"justify-end":!t(u).title}])},[x(n.$slots,"title",{},void 0,!0),m(t(z),{icon:"mdi:close",class:"text-2xl cursor-pointer text-primary-900",onClick:i[0]||(i[0]=f=>n.$emit("close"))})],2),r("div",null,[x(n.$slots,"icon",{},void 0,!0),x(n.$slots,"body",{},void 0,!0)]),x(n.$slots,"actions",{},void 0,!0)],16)])):T("",!0)]),_:3})]))}},X=E(W,[["__scopeId","data-v-cacacfa2"]]);function Y(s,e=null){const a=O(!1),u=e?w(e):w(Object.keys(s).reduce((o,c)=>(o[c]="",o),{})),n=w(Object.keys(s).reduce((o,c)=>(o[c]=[],o),{})),i=w(Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{}));function f(o){let c=0;i[o]=!0;const V=u[o],j=s[o]||{},b=Object.values(j);n[o]=[];for(const l of b){const d=l(V,u);if(d){n[o].push(d),c++;return}}return c===0}function k(){Object.keys(u).forEach(o=>f(o))}const y=B(()=>Object.values(i).every(o=>!o)),h=O(!1);return N(()=>n,o=>{h.value=Object.values(o).some(c=>c.length>0)},{deep:!0}),{errors:n,formData:u,touched:i,hasError:h,isPristine:y,isSaving:a,validateField:f,validateAllFields:k}}function ee(){const s=w({value:!1});return{isOpen:s,openModal:()=>{s.value=!0},closeModal:()=>{s.value=!1}}}const se={class:"form-wrap mb-8"},te={class:"text-2xl font-bold"},oe={class:"text-primary-600 mb-4"},ae={class:"content-body"},re={class:"text-2xl font-bold m-0 text-center"},le={class:"text-primary-600 mb-4 text-center"},ne={__name:"RegisterForm",setup(s){const e={username:{required:$(),maxLength:Z(64,"Username must not exceed 64 characters.")},email:{required:$(),email:H()},password:{required:$(),minLength:G(8,"Password must be at least 8 characters long."),password:J("Password must include a number and a special character.")},confirmPassword:{required:$(),sameAs:K("password","Passwords do not match.")}},{errors:a,hasError:u,isSaving:n,formData:i,validateField:f,validateAllFields:k}=Y(e),{isOpen:y,openModal:h,closeModal:o}=ee(),c=R(),V=async()=>{await k(),!u.value&&(n.value=!0,setTimeout(()=>{n.value=!1},1e3),console.log("Form data is valid:",i),h())},j=()=>{o(),c.push({name:"introduction"})};return(b,l)=>(v(),M("div",null,[r("form",{class:"flex flex-col justify-between h-full md:justify-start md:p-8 lg:p-0",onSubmit:D(V,["prevent"])},[r("div",se,[r("h3",te,p(b.$t("registerForm.title")),1),r("p",oe,p(b.$t("registerForm.description")),1),m(_,{id:"username-input",modelValue:t(i).username,"onUpdate:modelValue":l[0]||(l[0]=d=>t(i).username=d),"aria-label":"Username",label:"Username",type:"text",placeholder:"Insert your username",errors:t(a).username,onBlur:l[1]||(l[1]=d=>t(f)("username"))},null,8,["modelValue","errors"]),m(_,{id:"email-input",modelValue:t(i).email,"onUpdate:modelValue":l[2]||(l[2]=d=>t(i).email=d),"aria-label":"Email",label:"Email",type:"email",placeholder:"Insert your email",errors:t(a).email,onBlur:l[3]||(l[3]=d=>t(f)("email"))},null,8,["modelValue","errors"]),m(_,{id:"password-input",modelValue:t(i).password,"onUpdate:modelValue":l[4]||(l[4]=d=>t(i).password=d),"aria-label":"Password",label:"Password",type:"password",placeholder:"Insert your password",errors:t(a).password,onBlur:l[5]||(l[5]=d=>t(f)("password"))},null,8,["modelValue","errors"]),m(_,{id:"confirm-password-input",modelValue:t(i).confirmPassword,"onUpdate:modelValue":l[6]||(l[6]=d=>t(i).confirmPassword=d),"aria-label":"Confirm Password",label:"Confirm Password",type:"password",placeholder:"Confirm your password",errors:t(a).confirmPassword,onBlur:l[7]||(l[7]=d=>t(f)("confirmPassword"))},null,8,["modelValue","errors"])]),m(F,{loading:t(n),block:!0,type:"submit"},{default:g(()=>[P(p(b.$t("registerForm.submitButton")),1)]),_:1},8,["loading"])],32),t(y).value?(v(),C(X,{key:0,"is-open":t(y).value,onClose:t(o)},{icon:g(()=>[m(t(z),{icon:"mdi:check-circle",class:"text-5xl text-green-500 my-4 mx-auto"})]),body:g(()=>[r("div",ae,[r("h3",re,p(b.$t("registerForm.successTitle")),1),r("p",le,p(b.$t("registerForm.successMessage")),1)])]),actions:g(()=>[m(F,{variant:"primary",class:"w-full",onClick:j},{default:g(()=>[P(p(b.$t("registerForm.redirectToIntro")),1)]),_:1})]),_:1},8,["is-open","onClose"])):T("",!0)]))}},ie={class:"flex items-stretch text-white h-[-webkit-fill-available]"},de={class:"lg:flex w-1/2 hidden bg-gray-500 bg-no-repeat bg-cover relative items-center",style:{"background-image":"url('/register-bg-for-web.webp')"}},ue={class:"w-full px-24 z-10 hidden lg:block"},ce={class:"text-secondary-700 text-5xl font-bold text-left tracking-wide"},me={class:"text-wsmoke text-3xl my-4"},pe={class:"relative lg:w-1/2 w-full flex md:items-center justify-center md:px-16 px-0 z-0 bg-wsmoke"},fe={class:"relative w-full max-w-[25rem] mx-auto py-6 z-20 bg-wsmoke px-8 md:p-0 md:h-auto md:rounded md:shadow lg:shadow-none overflow-y-scroll lg:rounded-none flex flex-col justify-between"},be={class:"relative pb-12 -left-4 md:left-4 lg:-left-4 md:top-6 z-10"},ve={__name:"RegisterFormView",setup(s){return(e,a)=>(v(),M("section",ie,[r("div",de,[a[0]||(a[0]=r("div",{class:"absolute bg-black opacity-60 inset-0 z-0"},null,-1)),r("div",ue,[r("h1",ce,p(e.$t("company.slogan")),1),r("p",me,p(e.$t("company.calendarSlogan")),1)])]),r("div",pe,[a[1]||(a[1]=r("div",{class:"absolute lg:hidden z-10 inset-0 bg-gray-500 bg-no-repeat bg-cover items-center",style:{"background-image":"url('/register-bg-for-web.webp')"}},[r("div",{class:"absolute bg-black opacity-60 inset-0 z-0"})],-1)),r("div",fe,[r("div",be,[m(A,null,{default:g(()=>[P(p(e.$t("navigation.backHome")),1)]),_:1})]),m(ne,{class:"h-auto"})])])]))}};export{ve as default};
